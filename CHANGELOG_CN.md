# OwnExcaliDesk 更新日志

## 🎨 v0.4.0 - 专业图标系统与界面优化 (2025-09-02)

### ✨ 专业图标升级

**🎯 Lucide React 图标集成**
- 全应用替换 emoji 图标为专业 Lucide React 图标
- 优化 ExcalidrawEditor 工具栏，采用一致的专业图标设计
- 更新 TextToChartDialog 图标对齐和视觉层次
- 标准化 AI 配置状态显示，使用 CheckCircle/AlertCircle 图标

**🔧 布局系统优化**
- 简化布局菜单，移除智能布局复杂性
- 直接访问布局算法（树形、分层、网格、环形），无需弹窗选择
- 修复 Tauri 后端与 React 前端之间的菜单命令映射
- 简化算法名称，同时保持功能完整性

**🌐 菜单栏与国际化优化**
- 优化系统菜单栏布局名称，提升专业外观
- 修复国际化占位符显示 "layout.xxxx" 而非正确翻译的问题
- 为所有布局选项添加缺失的中英文翻译键
- 更新 TypeScript 接口以匹配新的翻译结构

### 🛠️ 技术改进

**🎨 界面一致性**
- 所有对话框保持一致的按钮高度和对齐
- 专业图标尺寸标准化（菜单项16px，操作按钮20px）
- 改进 TextToChartDialog 视觉间距和布局
- 修复 AI 配置状态布局，优化图标位置

**📚 全新素材库管理系统**
- 新增网络素材导入功能，支持从 Excalidraw 社区直接导入素材
- 实现智能分类存储：网络导入素材归入"Excalidraw素材库"，手动添加素材归入"个人素材库"
- 完整的素材库持久化存储，重启应用后素材完整保留
- 支持素材追加导入模式，新导入素材不会覆盖已有内容
- 优化素材库状态管理，提供实时导入进度和调试信息

**⚡ 代码质量**
- 移除未使用代码，清理组件结构
- 修复 TypeScript 导入和图标映射函数
- 保持向后兼容性的同时改善用户体验
- 增强组件模块化和可维护性

---

## 🤖 v0.3.0 - AI 智能图表生成与布局优化 (2025-09-01)

### 🎨 手绘字体完美呈现

**✍️ Excalidraw 手写字体修复**
- 修复字体文件缺失导致的系统默认字体显示问题
- 完整集成 Virgil、Cascadia、Assistant 等手写字体
- 配置 EXCALIDRAW_ASSET_PATH 支持自托管字体加载
- 优化 CSP 安全策略，支持生产环境字体和 WASM 资源
- 开发和生产模式字体显示完全一致

### ✨ AI 驱动的图表生成功能

**🧠 Text to Chart - 文本转图表**
- 支持自然语言描述生成专业 Mermaid 图表
- 智能识别图表类型：流程图、时序图、类图、状态图等
- 流式实时代码生成，所见即所得的创作体验
- 可编辑 Mermaid 代码，支持手动微调和优化
- 完整的错误处理和语法验证机制

**⚙️ AI 配置管理系统**
- 支持 OpenAI、Azure、自定义 API 等多种 AI 服务提供商
- 安全的 API 密钥存储和连接验证
- 智能 Token 估算和用量控制
- 流式和非流式生成模式切换

### 🎯 Auto Layout 智能布局系统

**🔧 基于 elkjs 的专业布局引擎**
- 集成专业图形布局引擎，支持 6 种布局算法
- 智能模式识别：自动检测图表类型并选择最佳算法
- 一键优化：MainMenu → Layout Tools → Auto Layout
- 支持复杂图表：架构图、流程图、时序图、类图、网络图

**🧠 智能模式识别算法**
- 时序图：检测水平参与者 + 垂直消息流 → Layered 算法
- 架构图：多框少箭头，框/箭头比>3 → Box 算法  
- 业务流程：决策节点 + 线性流程 → Layered 算法
- 类图：继承层次结构 → MrTree 算法
- 复杂网络：连接密度>2 → Stress 算法
- 通用场景：无明确模式 → 智能网格布局

### 🌐 完整国际化支持

**🗣️ 多语言界面**
- 完整的中英文界面支持，包含 250+ 翻译键值对
- 动态语言切换，支持应用重启生效
- 系统语言自动检测，智能默认设置
- AI 提示词多语言适配，生成本地化图表

**🎛️ Tauri 主菜单国际化**
- 完整的 Rust 端菜单动态语言支持
- 语言切换从设置提取到主菜单便捷访问
- 中文作为默认语言，符合目标用户群体

### 🛠️ 技术架构全面升级

**📊 智能服务层架构**
- `LayoutService.ts` (558行) 完整的智能布局分析系统
- `AIService.ts` (539行) 企业级 AI 服务集成
- `MermaidConverter.ts` 专业图表转换引擎
- 完整的 TypeScript 类型系统和错误处理

**⚡ 性能与稳定性优化**
- elkjs 引擎提供 O(n log n) 复杂度，支持大规模元素
- 流式 AI 响应实时反馈，提升用户体验
- 智能缓存和错误重试机制
- 完整的撤销/重做支持

---

### 🚀 这对您意味着什么

**对创意工作者：**
- 文本描述即可生成专业图表，大幅提升创作效率
- 一键智能布局，告别手动排列的繁琐工作
- 多语言界面支持，适应不同工作环境

**对专业用户：**
- 基于 elkjs 的专业级布局算法，媲美专业绘图软件
- 支持复杂图表类型，满足技术文档需求
- 可定制 AI 服务，灵活适配企业环境

**对所有用户：**
- 零学习成本的智能功能，自动化繁琐操作
- 完整的中文界面，本土化使用体验
- 企业级稳定性和错误处理机制

---

## 🎨 v0.2.0 - 全新弹窗体验升级 (2025-08-28)

### ✨ 重大界面交互优化

**🎯 全新自定义弹窗系统**
- 完全替换系统原生弹窗，打造统一美观的自定义弹窗体验
- 全应用统一设计语言，视觉风格高度一致
- 流畅动画效果和现代化样式，完美契合应用整体美学
- 优化视觉层级，合理间距和字体排版

**⌨️ 完善键盘交互体验**
- 修复所有弹窗场景下的 ESC 键功能
- ESC 键现在能正确取消操作（与点击 X 按钮行为一致）
- 提升键盘可访问性，支持完整键盘操作
- 弹窗与主界面间的无缝导航体验

**🎛️ 智能弹窗交互逻辑**
- 明确区分"取消操作"与"选择选项"的不同行为
- X 按钮和 ESC 键真正实现取消功能，无副作用
- 点击弹窗外部区域不再触发意外操作
- 智能弹窗状态管理，避免界面冲突

### 🔧 文件管理体验升级

**📂 强大的目录树操作**
- 支持目录树内文件拖拽移动，轻松整理文件结构
- 直接在文件树界面创建新文件夹
- 直观自然的文件管理操作体验
- 简化的工作区组织管理工具

**💾 智能"不保存"逻辑优化**
- 修复文件状态指示器（橙色圆点）在放弃更改后的正确清除
- 智能状态管理确保界面准确反映文件真实状态
- 更清洁的工作区，准确的视觉反馈
- 告别放弃文件上令人困惑的状态指示器

**📁 文件切换体验优化**
- 文件间切换更流畅，妥善处理未保存更改
- 未保存工作的清晰信息提示弹窗，更好的消息呈现
- 提升用户选择清晰度，改进按钮标签设计
- 简化多个绘图文件的管理工作流程

### 🎨 视觉设计与布局优化

**🎨 专业图标设计**
- 重新设计应用图标，现代简洁美学风格
- 提升品牌形象，专业视觉吸引力
- 改进图标在不同平台和尺寸下的识别度
- 整个应用保持统一的视觉语言

**📐 界面布局精细调整**
- 侧边栏切换按钮重新定位至更直观位置（画布缩放控件附近）
- 改进弹窗按钮间距，提供更好的视觉呼吸空间
- 优化内容布局，正确处理换行显示
- 更专业精致的整体外观

**🌟 内容呈现品质提升**
- 修复弹窗消息中的多行文本渲染问题
- 改进确认弹窗的视觉层次结构
- 提升所有界面元素的对比度和可读性
- 整个界面保持一致的间距和对齐

### 🛠️ 技术架构改进

**⚡ 状态管理优化**
- 健壮的弹窗状态同步（React Context 与 Zustand store 间）
- 改进 TypeScript 类型安全性，覆盖整个弹窗系统
- 更好的错误处理和回退机制
- 优化事件处理，提升性能表现

**🔒 应用生命周期改进**
- 增强应用关闭行为，正确检测未保存更改
- 复杂用户决策的智能弹窗链式处理
- 用户交互过程中可靠的状态持久化
- 与 Tauri 原生能力的更好集成

---

### 🚀 这对您意味着什么

**对设计师和创意专业人士：**
- 更直观的文件管理，尊重您的创作工作流
- 项目切换时的清晰反馈
- 不再困惑哪些文件有未保存更改
- 简化体验让您专注于创作本身

**对高级用户：**
- 可靠键盘快捷键支持的快速导航
- 符合预期的可预测弹窗行为
- 与系统级操作的更好集成
- 更响应、更专业的应用手感

**对所有用户：**
- 更清洁现代的界面，使用愉悦
- 所有应用功能的一致体验
- 清晰可操作弹窗带来的更低认知负担
- 专业级桌面应用体验

---

*OwnExcaliDesk 持续进化，致力成为创意专业人士首选的本地优先绘图工具。本版本专注于基于真实用户反馈的用户体验精细化改进。*

**立即下载最新版本，感受不同体验！** 🎨✨